/*! audero-sticky.js 0.3.1 | Aurelio De Rosa (@AurelioDeRosa) | MIT/GPL-3.0 Licensed */
!function(a,b){"use strict";"function"==typeof define&&define.amd?define(b):"object"==typeof module&&module.exports?module.exports=b():a.Sticky=b()}(this,function(){"use strict";function a(a,b){return a[x]&&b?a[x][b]:a[x]}function b(a,b,c){if(a[x]||(a[x]={}),"string"==typeof b)return void(a[x][b]=c);for(var d in b)b.hasOwnProperty(d)&&(a[x][d]=b[d])}function c(a){delete a[x]}function d(a,b,c){var d=document.createEvent("Event");d.initEvent(b,!0,!0);for(var e in c)c.hasOwnProperty(e)&&(d[e]=c[e]);a.dispatchEvent(d)}function e(a){var b={};a=a||{};for(var c in v)v.hasOwnProperty(c)&&(b[c]=a[c]||v[c]);return b}function f(a,b){var c=new RegExp("\\b"+b+"\\b");c.test(a.className)||(a.className+=" "+b)}function g(a,b){var c=new RegExp("\\b"+b+"\\b");a.className=a.className.replace(c,"").trim()}function h(a){var b,c;return f(a.element,a.settings.activeClass),b=window.getComputedStyle(a.element),c={marginBottom:b.marginBottom,marginTop:b.marginTop},g(a.element,a.settings.activeClass),c}function i(a,b){b.forEach(function(b){a[b]=""})}function j(a,b,c){c||(c=Object.keys(b)),c.forEach(function(c){a[c]=b[c]})}function k(a){var b=a.style.position;a.style.position="relative";var c=Number(window.getComputedStyle(a).zIndex);return a.style.position=b,isNaN(c)?void 0:c}function l(a,b){var c=k(a);if(void 0!==c)return c;var d=[].slice.call(document.querySelectorAll(b));return d.indexOf(a)+1}function m(a){var b={};for(var c in a)b[c]=a[c]+"px";return b}function n(b){var c=a(b.element);i(b.element.style,w.concat(["marginTop","marginBottom"])),b.element.style.position=c.position,c.placeholder&&c.placeholder.parentNode&&c.placeholder.parentNode.removeChild(c.placeholder)}function o(a,b){var c={},d=window.getComputedStyle(a),e=a.parentNode.getBoundingClientRect();return"auto"!==d.top?(c.start=a.getBoundingClientRect().top-parseFloat(d.top),c.end=e.bottom-(parseFloat(b.marginBottom)||0)):(c.start=a.getBoundingClientRect().bottom+parseFloat(d.bottom),c.end=e.top+(parseFloat(b.marginTop)||0)),c.start+=window.pageYOffset,c.end+=window.pageYOffset,c}function p(b){var c=b.element.getBoundingClientRect(),d=a(b.element,"placeholder");j(d.style,window.getComputedStyle(b.element),["top","bottom","marginTop","marginBottom","marginLeft","marginRight"]),j(d.style,m(c),["width","height","left"])}function q(c){function e(){p(c),b(c.element,"position",c.element.style.position),j(c.element.style,{position:"fixed"}),j(c.element.style,s.placeholder.style,w),c.element.parentNode.insertBefore(s.placeholder,c.element),d(c.element,"stickystart"),f(c.element,c.settings.activeClass)}function i(){n(c),d(c.element,"stickyend"),g(c.element,c.settings.activeClass)}function k(){var a=s.placeholder.parentNode;q=a?o(s.placeholder,m):o(c.element,m);var b=parseFloat(window.getComputedStyle(c.element).height)||0,d=q.end-b-window.pageYOffset,f=window.pageYOffset>=q.start&&window.pageYOffset<=q.end;f?(a||e(),c.element.style.top=d-t>=0?"":d+"px"):a&&i()}function l(){var a=s.placeholder.parentNode;q=a?o(s.placeholder,m):o(c.element,m);var b=parseFloat(window.getComputedStyle(c.element).height)||0,d=window.pageYOffset+window.innerHeight,f=q.end+b-d,g=d<=q.start&&d>=q.end;g?(a||e(),c.element.style.bottom=0>=f+t?"":-f+"px"):a&&i()}var m=h(c),q=o(c.element,m),r=window.getComputedStyle(c.element),s=a(c.element),t="auto"!==r.top?parseFloat(r.top):parseFloat(r.bottom);return"auto"!==r.top?k:l}function r(b){return function(){b.destroy(),b.init(),a(b.element,"handlers").scroll()}}function s(b){var c=a(b.element,"handlers");window.addEventListener("load",c.scroll),window.addEventListener("scroll",c.scroll),window.addEventListener("resize",c.resize)}function t(b){var c=a(b.element,"handlers");window.removeEventListener("load",c.scroll),window.removeEventListener("scroll",c.scroll),window.removeEventListener("resize",c.resize)}function u(a,b){this.element=a,this.settings=e(b)}var v={selector:".sticky",activeClass:"sticky--active"},w=["width","height","left","marginLeft","marginRight","zIndex"],x="auderoSticky";return u.isFeatureSupported=function(){var a=["ms","webkit"],b="position:sticky;",c=document.createElement("div");return a.forEach(function(a){b+="position:-"+a+"-sticky;"}),c.style.cssText=b,!!c.style.position},u.autoInit=function(a){var b=a&&a.selector?a.selector:v.selector;[].forEach.call(document.querySelectorAll(b),function(b){var c=new u(b,a);c.init()})},u.prototype.init=function(){if(a(this.element))throw new Error("This element has already been initialized");var c=document.createElement(this.element.nodeName);b(this.element,"placeholder",c),b(this.element,"handlers",{scroll:q(this),resize:r(this)}),j(c.style,{visibility:"hidden",zIndex:l(this.element,this.settings.selector)}),p(this),s(this),a(this.element,"handlers").scroll()},u.prototype.destroy=function(){n(this),t(this),c(this.element)},u});
//# sourceMappingURL=audero-sticky.min.js.map