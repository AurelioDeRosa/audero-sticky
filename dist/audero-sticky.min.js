/*! audero-sticky.js 0.3.2 | Aurelio De Rosa (@AurelioDeRosa) | MIT/GPL-3.0 Licensed */
!function(a,b){"use strict";"function"==typeof define&&define.amd?define(b):"object"==typeof module&&module.exports?module.exports=b():a.Sticky=b()}(this,function(){"use strict";function a(a,b){return a[z]&&b?a[z][b]:a[z]}function b(){var a=!1;try{var b=Object.defineProperty({},"passive",{get:function(){a=!0}});window.addEventListener("",null,b)}catch(a){}return a}function c(a,b,c){if(a[z]||(a[z]={}),"string"==typeof b)return void(a[z][b]=c);for(var d in b)b.hasOwnProperty(d)&&(a[z][d]=b[d])}function d(a){delete a[z]}function e(a,b,c){var d=document.createEvent("Event");d.initEvent(b,!0,!0);for(var e in c)c.hasOwnProperty(e)&&(d[e]=c[e]);a.dispatchEvent(d)}function f(a){var b={};a=a||{};for(var c in w)w.hasOwnProperty(c)&&(b[c]=a[c]||w[c]);return b}function g(a,b){var c=new RegExp("\\b"+b+"\\b");c.test(a.className)||(a.className+=" "+b)}function h(a,b){var c=new RegExp("\\b"+b+"\\b");a.className=a.className.replace(c,"").trim()}function i(a){var b,c;return g(a.element,a.settings.activeClass),b=window.getComputedStyle(a.element),c={marginBottom:b.marginBottom,marginTop:b.marginTop},h(a.element,a.settings.activeClass),c}function j(a,b){b.forEach(function(b){a[b]=""})}function k(a,b,c){c||(c=Object.keys(b)),c.forEach(function(c){a[c]=b[c]})}function l(a){var b=a.style.position;a.style.position="relative";var c=Number(window.getComputedStyle(a).zIndex);return a.style.position=b,isNaN(c)?void 0:c}function m(a,b){var c=l(a);if(void 0!==c)return c;var d=[].slice.call(document.querySelectorAll(b));return d.indexOf(a)+1}function n(a){var b={};for(var c in a)b[c]=a[c]+"px";return b}function o(b){var c=a(b.element);j(b.element.style,y.concat(["marginTop","marginBottom","top","bottom"])),b.element.style.position=c.position,c.placeholder&&c.placeholder.parentNode&&c.placeholder.parentNode.removeChild(c.placeholder)}function p(a,b){var c={},d=window.getComputedStyle(a),e=a.parentNode.getBoundingClientRect();return"auto"!==d.top?(c.start=a.getBoundingClientRect().top-parseFloat(d.top),c.end=e.bottom-(parseFloat(b.marginBottom)||0)):(c.start=a.getBoundingClientRect().bottom+parseFloat(d.bottom),c.end=e.top+(parseFloat(b.marginTop)||0)),c.start+=window.pageYOffset,c.end+=window.pageYOffset,c}function q(b){var c=b.element.getBoundingClientRect(),d=a(b.element,"placeholder");k(d.style,window.getComputedStyle(b.element),["top","bottom","marginTop","marginBottom","marginLeft","marginRight"]),k(d.style,n(c),["width","height","left"])}function r(b){function d(){q(b),c(b.element,"position",b.element.style.position),k(b.element.style,{position:"fixed"}),k(b.element.style,s.placeholder.style,y),b.element.parentNode.insertBefore(s.placeholder,b.element),e(b.element,"stickystart"),g(b.element,b.settings.activeClass)}function f(){o(b),e(b.element,"stickyend"),h(b.element,b.settings.activeClass)}function j(){var a=s.placeholder.parentNode;n=a?p(s.placeholder,m):p(b.element,m);var c=parseFloat(window.getComputedStyle(b.element).height)||0,e=n.end-c-window.pageYOffset,g=window.pageYOffset>=n.start&&window.pageYOffset<=n.end;g?(a||d(),b.element.style.top=e-t>=0?"":e+"px"):a&&f()}function l(){var a=s.placeholder.parentNode;n=a?p(s.placeholder,m):p(b.element,m);var c=parseFloat(window.getComputedStyle(b.element).height)||0,e=window.pageYOffset+window.innerHeight,g=n.end+c-e,h=e<=n.start&&e>=n.end;h?(a||d(),b.element.style.bottom=0>=g+t?"":-g+"px"):a&&f()}var m=i(b),n=p(b.element,m),r=window.getComputedStyle(b.element),s=a(b.element),t="auto"!==r.top?parseFloat(r.top):parseFloat(r.bottom);return"auto"!==r.top?j:l}function s(b){return function(){b.destroy(),b.init(),a(b.element,"handlers").scroll()}}function t(c){var d=a(c.element,"handlers");window.addEventListener("load",d.scroll),window.addEventListener("scroll",d.scroll,b()?x:!1),window.addEventListener("resize",d.resize)}function u(c){var d=a(c.element,"handlers");window.removeEventListener("load",d.scroll),window.removeEventListener("scroll",d.scroll,b()?x:!1),window.removeEventListener("resize",d.resize)}function v(a,b){this.element=a,this.settings=f(b)}var w={selector:".sticky",activeClass:"sticky--active"},x={passive:!0},y=["width","height","left","marginLeft","marginRight","zIndex"],z="auderoSticky";return v.isFeatureSupported=function(){var a=["ms","webkit"],b="position:sticky;",c=document.createElement("div");return a.forEach(function(a){b+="position:-"+a+"-sticky;"}),c.style.cssText=b,!!c.style.position},v.autoInit=function(a){var b=a&&a.selector?a.selector:w.selector;[].forEach.call(document.querySelectorAll(b),function(b){var c=new v(b,a);c.init()})},v.prototype.init=function(){if(a(this.element))throw new Error("This element has already been initialized");var b=document.createElement(this.element.nodeName);c(this.element,"placeholder",b),c(this.element,"handlers",{scroll:r(this),resize:s(this)}),k(b.style,{visibility:"hidden",zIndex:m(this.element,this.settings.selector)}),q(this),t(this),a(this.element,"handlers").scroll()},v.prototype.destroy=function(){o(this),u(this),d(this.element)},v});
//# sourceMappingURL=audero-sticky.min.js.map