/*! audero-sticky.js 0.3.2 | Aurelio De Rosa (@AurelioDeRosa) | MIT/GPL-3.0 Licensed */
(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.Sticky = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"document"in window.self&&("classList"in document.createElement("_")&&(!document.createElementNS||"classList"in document.createElementNS("http://www.w3.org/2000/svg","g"))?!function(){"use strict";var t=document.createElement("_");if(t.classList.add("c1","c2"),!t.classList.contains("c2")){var e=function(t){var e=DOMTokenList.prototype[t];DOMTokenList.prototype[t]=function(t){var n,i=arguments.length;for(n=0;n<i;n++)t=arguments[n],e.call(this,t)}};e("add"),e("remove")}if(t.classList.toggle("c3",!1),t.classList.contains("c3")){var n=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(t,e){return 1 in arguments&&!this.contains(t)==!e?e:n.call(this,t)}}t=null}():!function(t){"use strict";if("Element"in t){var e="classList",n="prototype",i=t.Element[n],s=Object,r=String[n].trim||function(){return this.replace(/^\s+|\s+$/g,"")},o=Array[n].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1},c=function(t,e){this.name=t,this.code=DOMException[t],this.message=e},a=function(t,e){if(""===e)throw new c("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(e))throw new c("INVALID_CHARACTER_ERR","String contains an invalid character");return o.call(t,e)},l=function(t){for(var e=r.call(t.getAttribute("class")||""),n=e?e.split(/\s+/):[],i=0,s=n.length;i<s;i++)this.push(n[i]);this._updateClassName=function(){t.setAttribute("class",this.toString())}},u=l[n]=[],h=function(){return new l(this)};if(c[n]=Error[n],u.item=function(t){return this[t]||null},u.contains=function(t){return t+="",a(this,t)!==-1},u.add=function(){var t,e=arguments,n=0,i=e.length,s=!1;do t=e[n]+"",a(this,t)===-1&&(this.push(t),s=!0);while(++n<i);s&&this._updateClassName()},u.remove=function(){var t,e,n=arguments,i=0,s=n.length,r=!1;do for(t=n[i]+"",e=a(this,t);e!==-1;)this.splice(e,1),r=!0,e=a(this,t);while(++i<s);r&&this._updateClassName()},u.toggle=function(t,e){t+="";var n=this.contains(t),i=n?e!==!0&&"remove":e!==!1&&"add";return i&&this[i](t),e===!0||e===!1?e:!n},u.toString=function(){return this.join(" ")},s.defineProperty){var f={get:h,enumerable:!0,configurable:!0};try{s.defineProperty(i,e,f)}catch(t){t.number===-2146823252&&(f.enumerable=!1,s.defineProperty(i,e,f))}}else s[n].__defineGetter__&&i.__defineGetter__(e,h)}}(window.self));
},{}],2:[function(require,module,exports){
window.requestAnimationFrame||function(e){"use strict";e.requestAnimationFrame=e.msRequestAnimationFrame||e.mozRequestAnimationFrame||e.webkitRequestAnimationFrame||function(){var e=60,n=1e3/e,t=Date.now(),a=t;return function(e){var i=Date.now(),m=Math.max(0,n-(i-a)),o=i+m;return a=o,setTimeout(function(){e(o-t)},m)}}(),e.cancelAnimationFrame=e.mozCancelAnimationFrame||e.webkitCancelAnimationFrame||e.cancelRequestAnimationFrame||e.msCancelRequestAnimationFrame||e.mozCancelRequestAnimationFrame||e.webkitCancelRequestAnimationFrame||function(e){clearTimeout(e)}}(this);
},{}],3:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function getScrollOptions(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("",null,t)}catch(e){}return!!e&&{passive:!0}}function getStickyMargins(e){var t=void 0,n=void 0;return e.element.classList.add(e.settings.activeClass),t=window.getComputedStyle(e.element),n={marginBottom:t.marginBottom,marginTop:t.marginTop},e.element.classList.remove(e.settings.activeClass),n}function getComputedZIndex(e){var t=e.style.position;e.style.position="relative";var n=Number(window.getComputedStyle(e).zIndex);return e.style.position=t,isNaN(n)?void 0:n}function getZIndex(e,t){var n=getComputedZIndex(e);if(void 0!==n)return n;var o=[].slice.call(document.querySelectorAll(t));return o.indexOf(e)+1}function convertNumbersToPixels(e){var t={};for(var n in e)t[n]=e[n]+"px";return t}function cleanUp(e){var t=store.getData(e.element);_style2.default.resetStyleProperties(e.element.style,properties.concat(["marginTop","marginBottom","top","bottom"])),e.element.style.position=t.position,t.placeholder&&t.placeholder.parentNode&&t.placeholder.parentNode.removeChild(t.placeholder)}function calculateBoundaries(e,t){var n={start:0,end:0},o=window.getComputedStyle(e),r=e.parentNode.getBoundingClientRect();return"auto"!==o.top?(n.start=e.getBoundingClientRect().top-parseFloat(o.top),n.end=r.bottom-(parseFloat(t.marginBottom)||0)):(n.start=e.getBoundingClientRect().bottom+parseFloat(o.bottom),n.end=r.top+(parseFloat(t.marginTop)||0)),n.start+=window.pageYOffset,n.end+=window.pageYOffset,n}function updatePlaceholderStyle(e){var t=e.element.getBoundingClientRect(),n=store.getData(e.element,"placeholder");_style2.default.copyStyleProperties(n.style,window.getComputedStyle(e.element),["top","bottom","marginTop","marginBottom","marginLeft","marginRight"]),_style2.default.copyStyleProperties(n.style,convertNumbersToPixels(t),["width","height","left"])}function onScroll(e){function t(){var t=store.getData(e.element);updatePlaceholderStyle(e),t.position=e.element.style.position,store.setData(e.element,t),_style2.default.copyStyleProperties(e.element.style,{position:"fixed"}),_style2.default.copyStyleProperties(e.element.style,t.placeholder.style,properties),e.element.parentNode.insertBefore(t.placeholder,e.element),_eventEmitter2.default.fireEvent("stickystart",e.element),e.element.classList.add(e.settings.activeClass)}function n(){cleanUp(e),_eventEmitter2.default.fireEvent("stickyend",e.element),e.element.classList.remove(e.settings.activeClass)}function o(t){var n=store.getData(e.element).placeholder;return t?calculateBoundaries(n,l):calculateBoundaries(e.element,l)}function r(){var r=!!store.getData(e.element).placeholder.parentNode,i=o(r),l=parseFloat(window.getComputedStyle(e.element).height)||0,s=i.end-l-window.pageYOffset,d=window.pageYOffset>=i.start&&window.pageYOffset<=i.end;d?(r||t(),e.element.style.top=s-a>=0?"":s+"px"):r&&n()}function i(){var r=!!store.getData(e.element).placeholder.parentNode,i=o(r),l=parseFloat(window.getComputedStyle(e.element).height)||0,s=window.pageYOffset+window.innerHeight,d=i.end+l-s,c=s<=i.start&&s>=i.end;c?(r||t(),e.element.style.bottom=d+a<=0?"":-d+"px"):r&&n()}var l=getStickyMargins(e),s=window.getComputedStyle(e.element),a="auto"!==s.top?parseFloat(s.top):parseFloat(s.bottom);return"auto"!==s.top?r:i}function onResize(e){return function(){e.destroy(),e.init(),store.getData(e.element,"handlers").scroll()}}function bindEvents(e){var t=store.getData(e.element,"handlers");window.addEventListener("load",t.scroll),window.addEventListener("scroll",window.requestAnimationFrame(t.scroll),getScrollOptions()),window.addEventListener("resize",window.requestAnimationFrame(t.resize))}function unbindEvents(e){var t=store.getData(e.element,"handlers");window.removeEventListener("load",t.scroll),window.removeEventListener("scroll",t.scroll,getScrollOptions()),window.removeEventListener("resize",t.resize)}Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();require("classlist-polyfill"),require("window.requestanimationframe");var _eventEmitter=require("./helpers/event-emitter"),_eventEmitter2=_interopRequireDefault(_eventEmitter),_store=require("./helpers/store"),_store2=_interopRequireDefault(_store),_style=require("./helpers/style"),_style2=_interopRequireDefault(_style),defaults={selector:".sticky",activeClass:"sticky--active"},properties=["width","height","left","marginLeft","marginRight","zIndex"],namespace="auderosticky",store=new _store2.default(namespace),Sticky=function(){function e(t){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];_classCallCheck(this,e),this.element=t,this.settings=_extends({},defaults,n)}return _createClass(e,[{key:"init",value:function(){if(store.getData(this.element))throw new Error("This element has already been initialized");var e=document.createElement(this.element.nodeName);store.setData(this.element,{placeholder:e,handlers:{scroll:onScroll(this),resize:onResize(this)},position:this.element.style.position}),_style2.default.copyStyleProperties(e.style,{visibility:"hidden",zIndex:getZIndex(this.element,this.settings.selector),display:"block"}),updatePlaceholderStyle(this),bindEvents(this),store.getData(this.element,"handlers").scroll()}},{key:"destroy",value:function(){cleanUp(this),unbindEvents(this),store.removeData(this.element)}}],[{key:"isFeatureSupported",value:function(){var e=["ms","webkit"],t="position:sticky;",n=document.createElement("div");return e.forEach(function(e){t+="position:-"+e+"-sticky;"}),n.style.cssText=t,!!n.style.position}},{key:"autoInit",value:function(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];t=_extends({},defaults,t),[].forEach.call(document.querySelectorAll(t.selector),function(n){var o=new e(n,t);o.init()})}}]),e}();exports.default=Sticky,module.exports=exports.default;
},{"./helpers/event-emitter":4,"./helpers/store":5,"./helpers/style":6,"classlist-polyfill":1,"window.requestanimationframe":2}],4:[function(require,module,exports){
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),EventEmitter=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"namespaceEvent",value:function(t){return e.namespace+"."+t}},{key:"fireEvent",value:function(e,t){var n=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],r=document.createEvent("Event");r.initEvent(e,!0,!0),Object.getOwnPropertyNames(n).forEach(function(e){if(r[e]=n[e],r[e]!==n[e])throw new TypeError("Cannot set a property which has only a getter")}),t.dispatchEvent(r)}}]),e}();exports.default=EventEmitter,module.exports=exports.default;
},{}],5:[function(require,module,exports){
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),Store=function(){function e(t){_classCallCheck(this,e),this.namespace=t}return _createClass(e,[{key:"getData",value:function(e,t){return e[this.namespace]&&t?e[this.namespace][t]:e[this.namespace]}},{key:"setData",value:function(e,t){return e[this.namespace]||(e[this.namespace]={}),e[this.namespace]=t,this}},{key:"removeData",value:function(e){return delete e[this.namespace],this}}]),e}();exports.default=Store,module.exports=exports.default;
},{}],6:[function(require,module,exports){
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Style=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"resetStyleProperties",value:function(e,t){t.forEach(function(t){e[t]=""})}},{key:"copyStyleProperties",value:function(e,t){var n=arguments.length<=2||void 0===arguments[2]?Object.keys(t):arguments[2];n.forEach(function(n){e[n]=t[n]})}}]),e}();exports.default=Style,module.exports=exports.default;
},{}]},{},[3])(3)
});


//# sourceMappingURL=audero-sticky.min.js.map